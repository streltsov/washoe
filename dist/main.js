!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o=(e="div",t="")=>{const n=document.createElement(e.split(".")[0]);return e.split(".")[1]&&(n.className=e.split(".").slice(1).join(" ")),n.textContent=t,n},r=(e,t="")=>{const n=o("div.wsh-shadow-root"+t);n.attachShadow({mode:"closed"}).appendChild(e),document.body.appendChild(n)},a=(e="")=>document.querySelectorAll(".wsh-shadow-root"+e).forEach(e=>e.remove()),i=(e,t,n)=>{browser.storage.sync.set({[e]:{meaning:t,example:n,stage:0,time:Date.now()}})};var d=e=>{const t=o("section"),n=o("style","input{border:1px solid #0a84ff;box-shadow:0 0 0 1px #0a84ff, 0 0 0 4px rgba(10, 132, 255, 0.3);border-radius:2px;height:48px;min-width:440px;font-size:24px;padding:0 12px}input::placeholder{color:#737373}section{padding:36px 52px;border:2px solid #d7d7db;border-radius:4px;max-width:min-content;position:fixed;top:100px;right:0;left:0;margin:0 auto;background-color:#f9f9fa}"),r=o("input");return r.placeholder="Type word or phrase",r.addEventListener("keydown",n=>{n.stopPropagation(),13==n.keyCode&&(t.parentNode.host.remove(),e(n.target.value))}),t.appendChild(n),t.appendChild(r),setTimeout(()=>r.focus(),0),t};const s=e=>{e.stopPropagation(),74==e.keyCode&&e.target.nextSibling.focus(),75==e.keyCode&&e.target.previousSibling.focus(),13==e.keyCode&&(e.target.querySelector("li")?(e.target.classList.add("selected"),e.target.querySelector("li").focus()):(i(e.target.offsetParent.querySelector(".title").innerText,e.target.firstChild.innerText),a(".paper")))},l=e=>{e.stopPropagation(),74==e.keyCode&&e.target.nextSibling.focus(),75==e.keyCode&&e.target.previousSibling.focus(),13==e.keyCode&&(i(e.target.offsetParent.querySelector(".title").innerText,e.target.parentNode.parentNode.firstChild.innerText,e.target.innerText),a(".paper")),(27==e.keyCode||e.ctrlKey&&219==e.keyCode)&&(e.preventDefault(),e.target.parentElement.parentElement.classList.remove("selected"),e.target.parentElement.parentElement.focus())};var c=e=>{const t=o("section"),n=o("style","section{position:fixed;top:0;bottom:0;left:0;right:0;margin:auto;max-width:75%;max-height:75%;background-color:#f9f9fa;border:2px solid #d7d7db;border-radius:2px;padding:16px;overflow:auto;z-index:99999999}ol > li{font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-stretch:normal;letter-spacing:0.2px;line-height:22px;padding-bottom:16px}ol > li:focus,ul > li:focus{border:1px solid #0a84ff;border-radius:2px;box-shadow:0 0 0 1px #0a84ff, 0 0 0 4px rgba(10, 132, 255, 0.3)}.selected{border:1px solid #30e60b;border-radius:2px;box-shadow:0 0 0 1px #30e60b, 0 0 0 4px rgba(48, 230, 11, 0.3)}ul > li{font-style:italic;width:max-content}:focus{outline:none}::-moz-focus-inner{border:0}"),r=o("h1.title",e[0].word),a=o("ol");return e.forEach(e=>{const t=o("li"),n=o("span.meaning",e.meaning);t.tabIndex="1",t.appendChild(n),t.addEventListener("keydown",s),t.addEventListener("mousedown",e=>e.preventDefault());const r=o("ul");e.examples.forEach(e=>{const t=o("li",e);t.tabIndex="1",t.addEventListener("keydown",l),t.addEventListener("mousedown",e=>e.preventDefault()),r.appendChild(t)}),t.appendChild(r),a.appendChild(t)}),[n,r,a].forEach(e=>t.appendChild(e)),setTimeout(()=>a.querySelector("li").focus(),0),t};const p=(e,t)=>{browser.storage.sync.get().then(n=>{browser.storage.sync.set({[e]:{...n[e],time:Date.now(),stage:"next"==t?++n[e].stage:0}})}),browser.runtime.sendMessage({action:"Remove cards from all tabs"})};var u=({word:e,meaning:t,example:n})=>{const r=o("section.container"),a=o("style",".container{display:flex;flex-direction:column;font-family:sans-serif;background-color:#0c0c0d;color:#f9f9fa;position:fixed;bottom:0;left:0;width:100%;z-index:2147483647;animation-name:fade-in;animation-duration:3s}.visible{display:flex;justify-content:center;align-items:center;font-size:16px;min-height:48px}.hidden{display:flex;flex-direction:column;justify-content:space-around;align-items:center;height:0;overflow:hidden}.meaning,.example,.buttons{width:100%;max-width:40ch}.example{font-style:italic;}.buttons{display:flex;justify-content:space-around;}.buttons button{background-color:#2a2a2e;color:#fff;border:none;min-width:132px;height:32px}.buttons button:hover{background-color:#38383d}.show-hidden{animation-name:show-up;animation-duration:.7s;animation-fill-mode:forwards}@keyframes fade-in{from{opacity:0}to{opacity:1}}@keyframes show-up{from{height:0}to{height:200px}}"),i=o("div.visible"),d=o("span.word",e);i.appendChild(d);const s=o("div.hidden"),l=o("span.meaning",`:${t}`);if(s.appendChild(l),n){const e=o("span.example",`For Example: ${n}`);s.appendChild(e)}const c=o("div.buttons");return["Again","Next"].forEach(e=>c.appendChild(o("button."+e.toLowerCase(),e))),c.addEventListener("click",t=>p(e,t.target.className)),s.appendChild(c),[a,i,s].forEach(e=>r.appendChild(e)),i.addEventListener("click",()=>s.classList.add("show-hidden")),r};const f=e=>e.querySelector(".def_text")?e.querySelector(".def_text").innerText:e.querySelector(".un_text")?e.querySelector(".un_text").innerText:e.querySelector(".both_text").innerText,x=e=>Array.from(e.querySelectorAll(".vi_content"),e=>e.innerText);var h=e=>Array.from(e.querySelectorAll(".sense"),t=>({word:e.querySelector("#ld_entries_v2_mainh").innerText,meaning:f(t),examples:x(t)}));document.addEventListener("keydown",e=>{e.ctrlKey&&191==e.keyCode&&(e.preventDefault(),a(),r(d(m),".search-bar")),(27==e.keyCode||e.ctrlKey&&219==e.keyCode)&&(e.preventDefault(),a())}),browser.runtime.onMessage.addListener(e=>!((e="")=>Boolean(document.querySelector(".wsh-shadow-root"+e)))("-card")&&r(u(e.wordData),"-card"));const m=e=>(async e=>{const t=await fetch(e),n=await t.text();return await(new DOMParser).parseFromString(n,"text/html")})("http://www.learnersdictionary.com/definition/"+e).then(h).then(e=>r(c(e),".paper")).catch(console.error)}]);