!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";n.r(t);const o=(e="div",t="")=>{const[n,...o]=e.match(/[^\.]+/g),r=document.createElement(n);return r.className=o.join(" "),r.textContent=t,r},r=(e,t)=>Object.keys(t).forEach(n=>e.style[n]=t[n]),i=e=>document.querySelector(e)&&document.querySelector(e).remove(),a={zIndex:"2147483647",position:"fixed",margin:"auto",top:"100px",right:0,left:0,maxWidth:"736px",width:"75%",height:"48px",fontSize:"15px",paddingInlineStart:"48px",paddingInlineEnd:"48px",background:"#38383D",borderRadius:"3px",color:"rgba(249, 249, 250, 1)",border:"solid 1px #0a84ff",boxShadow:"0 0 0 1px #0a84ff, 0 0 0 4px rgba(10, 132, 255, 0.3)"};var d=e=>{const t=o("input.washoe-search-bar");return t.placeholder="Search for a word",r(t,a),t.addEventListener("keydown",n=>{9==n.keyCode&&n.preventDefault(),13==n.keyCode&&(e(n.target.value),t.remove()),(n.ctrlKey&&219==n.keyCode||27==n.keyCode)&&(n.preventDefault(),t.remove())}),t.addEventListener("blur",()=>setTimeout(()=>t.focus(),0)),setTimeout(()=>t.focus(),0),t};const g={position:"fixed",top:0,bottom:0,left:0,right:0,margin:"auto",maxWidth:"75%",maxHeight:"75%",backgroundColor:"#39383e",borderRadius:"2px",padding:"16px",overflow:"auto",zIndex:"2147483647",scrollbarWidth:"thin",scrollbarColor:"#0a84ff #4a4a4f",color:"white"},c={outline:"none",padding:"8px"},l={backgroundColor:"#4b4a4f"},s={backgroundColor:"unset"};var u=(e,t)=>{const n=o("section.washoe-paper");r(n,g);const i=o("h1",e[0].word),a=o("ol");return e.forEach(e=>{const i=o("li");r(i,c),i.addEventListener("focus",()=>r(i,l)),i.addEventListener("blur",()=>r(i,s));const d=o("strong",e.meaning);i.tabIndex="1",i.appendChild(d),i.addEventListener("mousedown",e=>e.preventDefault()),i.addEventListener("keydown",o=>{o.preventDefault(),74==o.keyCode&&o.target.nextSibling.focus(),75==o.keyCode&&o.target.previousSibling.focus(),o.ctrlKey&&219==o.keyCode&&n.remove(),27==o.keyCode&&n.remove(),13==o.keyCode&&t(e)});const g=o("ul");e.examples.forEach(e=>g.appendChild(o("li",e))),i.appendChild(g),a.appendChild(i)}),[i,a].forEach(e=>n.appendChild(e)),setTimeout(()=>a.querySelector("li").focus(),0),n};const I={position:"fixed",bottom:0,left:0,backgroundColor:"rgb(0, 0, 0)",color:"rgb(255, 255, 255)",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},p=(e,t)=>{(async(e,t)=>{const{[e]:n}=await browser.storage.sync.get(e),o=Date.now(),r=t?n.stage+1:0,i={[e]:{...n,time:o,stage:r}};browser.storage.sync.set(i)})(e,t),browser.runtime.sendMessage({action:"Remove cards from all tabs"})};var C=({word:e,meaning:t,examples:n,stage:i})=>{const a=o("div.washoe-card");if(r(a,I),i%2){const n=o("div",e);n.addEventListener("click",()=>{const e=setInterval((function(){240==t&&e(),i.style.height=t+"px",t++}),2);let t=0}),r(n,{display:"flex",alignItems:"center",height:"48px",fontSize:"18px",fontWeight:500});const i=o();r(i,{height:"0",overflow:"hidden"});const d=o("span",t),g=o(),c=o("button","Again");c.addEventListener("click",()=>p(e));const l=o("button","Next");l.addEventListener("click",()=>p(e,1)),[c,l].forEach(e=>g.appendChild(e)),[d,g].forEach(e=>i.appendChild(e)),[n,i].forEach(e=>a.appendChild(e))}else{const n=o("div",t),r=o("form");r.addEventListener("submit",t=>{t.preventDefault();const[n]=Array.from(t.originalTarget.elements,e=>e.value);n==e&&p(e)});const i=o("input");r.appendChild(i),n.appendChild(r),[n].forEach(e=>a.appendChild(e))}return a};const x={display:"flex",alignItems:"center",borderRadius:"2px",backgroundColor:"#333",color:"white",position:"fixed",margin:"auto",top:"100px",right:0,left:0,width:"max-content",padding:"16px",margin:"auto"},m={width:"32px",height:"32px",backgroundSize:"contain",backgroundImage:'url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzNweCIgaGVpZ2h0PSI3M3B4IiB2aWV3Qm94PSIwIDAgNzMgNzMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8ZGVmcz4gICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iOTMuMDkyODA5NiUiIHkxPSI1Mi43NzM0Mzc1JSIgeDI9IjY4LjUxMzMzOTglIiB5Mj0iMTE5LjMyNjAwNyUiIGlkPSJsaW5lYXJHcmFkaWVudC0xIj4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMEE4NEZGIiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMCUiLz4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMEE4NEZGIiBvZmZzZXQ9IjY5LjM2OTgxODIlIi8+ICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBBODRGRiIgb2Zmc2V0PSIxMDAlIi8+ICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzI0ODRDNiIgc3RvcC1vcGFjaXR5PSIwLjAwNDc3NzY2OTUxIiBvZmZzZXQ9IjEwMCUiLz4gICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMjQ4NEM2IiBzdG9wLW9wYWNpdHk9IjAiIG9mZnNldD0iMTAwJSIvPiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyNDg0QzYiIHN0b3Atb3BhY2l0eT0iMCIgb2Zmc2V0PSIxMDAlIi8+ICAgICAgICA8L2xpbmVhckdyYWRpZW50PiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMiIgeD0iMCIgeT0iMCIgd2lkdGg9IjQ4IiBoZWlnaHQ9IjYwIi8+ICAgIDwvZGVmcz4gICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2hhcGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01LjAwMDAwMCwgLTEuMDAwMDAwKSI+ICAgICAgICAgICAgPHBhdGggZD0iTTQxLjgsNzMuOCBDMjEuOSw3My44IDUuOCw1Ny43IDUuOCwzNy44IEM1LjgsMTguMSAyMS42LDIuMiA0MS4xLDEuOCBDNDEuMywxLjggNDEuNCwxLjggNDEuNCwxLjggQzQxLjUsMS44IDQxLjcsMS44IDQxLjgsMS44IEM0NC42LDIuMiA0Ni44LDQuNSA0Ni44LDcuMyBDNDYuOCwxMC4xIDQ0LjYsMTIuNSA0MS44LDEyLjcgQzI4LDEyLjggMTYuOCwyNCAxNi44LDM3LjggQzE2LjgsNTEuNiAyOCw2Mi44IDQxLjgsNjIuOCBDNTUuNiw2Mi44IDY2LjgsNTEuNiA2Ni44LDM3LjggTDc3LjgsMzcuOCBDNzcuOCw1Ny43IDYxLjcsNzMuOCA0MS44LDczLjggWiIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIvPiAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTMiIGZpbGw9IndoaXRlIj4gICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0yIi8+ICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgIDxnIGlkPSJNYXNrIi8+ICAgICAgICAgICAgPHBhdGggZD0iTTQxLjgsNzMuOCBDMjEuOSw3My44IDUuOCw1Ny43IDUuOCwzNy44IEM1LjgsMTguMSAyMS42LDIuMiA0MS4xLDEuOCBDNDEuMywxLjggNDEuNCwxLjggNDEuNCwxLjggQzQxLjUsMS44IDQxLjcsMS44IDQxLjgsMS44IEM0NC42LDIuMiA0Ni44LDQuNSA0Ni44LDcuMyBDNDYuOCwxMC4xIDQ0LjYsMTIuNSA0MS44LDEyLjcgQzI4LDEyLjggMTYuOCwyNCAxNi44LDM3LjggQzE2LjgsNTEuNiAyOCw2Mi44IDQxLjgsNjIuOCBDNTUuNiw2Mi44IDY2LjgsNTEuNiA2Ni44LDM3LjggTDc3LjgsMzcuOCBDNzcuOCw1Ny43IDYxLjcsNzMuOCA0MS44LDczLjggWiIgZmlsbD0iIzBBODRGRiIgbWFzaz0idXJsKCNtYXNrLTMpIi8+ICAgICAgICA8L2c+ICAgIDwvZz48L3N2Zz4=")',marginLeft:"8px"};var b=(e="Loading...")=>{const t=o("div.washoe-spinner");r(t,x);const n=o("span",e),i=o();r(i,m);let a=0;return setInterval(()=>{a=360==a?0:a+4,i.style.transform="rotate("+a+"deg)"},10),[n,i].forEach(e=>t.appendChild(e)),t};const y={backgroundColor:"#2a2a2e",display:"flex",flexDirection:"column",padding:"20px"},A={border:"1px solid rgba(249,249,250,0.2)",borderRadius:"2px",backgroundColor:"#202023",color:"rgb(249, 249, 250)",padding:"5px 8px",width:"100%",resize:"none",boxSizing:"border-box"},h={display:"flex"},D={backgroundColor:"rgba(249,249, 250, 0.1)",color:"rgb(249,249,250)",border:"none",height:"32px"},M={alignSelf:"center",width:"54px",height:"54px"},f={color:"rgb(249,249,250)",display:"block",margin:"8px 0 4px 0"},w=e=>{const t=o();r(t,{...h,marginBottom:"4px"});const n=o("textarea",e);r(n,A);const i=o("button","-");return r(i,D),r(i,M),i.type="button",i.addEventListener("click",()=>t.remove()),t.appendChild(n),t.appendChild(i),t};var L=({word:e="",meaning:t="",examples:n=[""]},i)=>{const a=o("form.washoe-form");r(a,y),a.addEventListener("submit",i),a.addEventListener("keydown",e=>{(e.ctrlKey&&219==e.keyCode||27==e.keyCode)&&(e.preventDefault(),a.remove())});const d=o("input");r(d,A),d.value=e.trim();const g=o(),c=o("textarea",t);r(c,A);const l=o("label","Meaning");r(l,f),g.appendChild(l),g.appendChild(c);const s=o("div"),u=o("label","Examples");r(u,f),s.appendChild(u),n.map(w).forEach(e=>s.appendChild(e));const I=o("button","+");I.type="button",r(I,D),I.addEventListener("click",()=>{const e=w("");setTimeout(()=>e.querySelector("textarea").focus(),0),s.appendChild(e)});const p=o("input");return r(p,{...D,marginTop:"20px"}),p.type="submit",[d,g,s,I,p].forEach(e=>a.appendChild(e)),setTimeout(()=>d.focus(),0),a};const N=e=>e.querySelector(".def_text")?e.querySelector(".def_text").innerText:e.querySelector(".un_text")?e.querySelector(".un_text").innerText:e.querySelector(".both_text").innerText,v=e=>Array.from(e.querySelectorAll(".vi_content"),e=>e.innerText);var j=e=>Array.from(e.querySelectorAll(".sense"),t=>({word:e.querySelector("#ld_entries_v2_mainh").innerText,meaning:N(t),examples:v(t)}));document.addEventListener("keydown",e=>{e.ctrlKey&&191==e.keyCode&&(e.preventDefault(),i(".washoe-paper"),i(".washoe-search-bar"),document.body.appendChild(d(E)))}),browser.runtime.onMessage.addListener(e=>{(e=>Boolean(document.querySelector(e)))(".washoe-card")||document.body.appendChild(C(e.wordData))});const S=e=>{e.preventDefault();const[t,n,...o]=Array.from(e.originalTarget.elements).map(e=>e.value).filter(e=>e);(({word:e,meaning:t,examples:n})=>{browser.storage.sync.set({[e]:{meaning:t,examples:n,stage:0,time:Date.now()}})})({word:t,meaning:n,examples:o}),i(".washoe-form")},E=e=>{document.body.appendChild(b(`Waiting for "${e}"`)),(async e=>{const t=await fetch(e),n=await t.text();return await(new DOMParser).parseFromString(n,"text/html")})("http://www.learnersdictionary.com/definition/"+e).then(e=>j(e)).then(e=>{i(".washoe-spinner"),document.body.appendChild(u(e,e=>{i(".washoe-paper"),document.body.appendChild(L(e,S))}))}).catch(console.error)}}]);