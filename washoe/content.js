!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";n.r(t);const o=(e="div",t="")=>{const[n,...o]=e.match(/[^\.]+/g),r=document.createElement(n);return r.className=o.join(" "),r.textContent=t,r},r=(e,t)=>Object.keys(t).forEach(n=>e.style[n]=t[n]),a=e=>document.querySelector(e)&&document.querySelector(e).remove(),d={zIndex:"2147483647",position:"fixed",margin:"auto",top:"100px",right:0,left:0,maxWidth:"736px",width:"75%",height:"48px",fontSize:"15px",paddingInlineStart:"48px",paddingInlineEnd:"48px",background:"#38383D",borderRadius:"3px",color:"rgba(249, 249, 250, 1)",border:"solid 1px #0a84ff",boxShadow:"0 0 0 1px #0a84ff, 0 0 0 4px rgba(10, 132, 255, 0.3)"};var i=e=>{const t=o("input.washoe-search-bar");return t.placeholder="Search for a word",r(t,d),t.addEventListener("keydown",n=>{9==n.keyCode&&n.preventDefault(),13==n.keyCode&&(e(n.target.value),t.remove()),(n.ctrlKey&&219==n.keyCode||27==n.keyCode)&&(n.preventDefault(),t.remove())}),t.addEventListener("blur",()=>setTimeout(()=>t.focus(),0)),setTimeout(()=>t.focus(),0),t};const s={position:"fixed",top:0,bottom:0,left:0,right:0,margin:"auto",maxWidth:"75%",maxHeight:"75%",backgroundColor:"#39383e",borderRadius:"2px",padding:"16px",overflow:"auto",zIndex:"2147483647",scrollbarWidth:"thin",scrollbarColor:"#0a84ff #4a4a4f",color:"white"},c={outline:"none",padding:"8px"},l={backgroundColor:"#4b4a4f"},u={backgroundColor:"unset"};var p=(e,t)=>{const n=o("section.washoe-paper");r(n,s);const a=o("h1",e[0].word),d=o("ol");return e.forEach(e=>{const a=o("li");r(a,c),a.addEventListener("focus",()=>r(a,l)),a.addEventListener("blur",()=>r(a,u));const i=o("strong",e.meaning);a.tabIndex="1",a.appendChild(i),a.addEventListener("mousedown",e=>e.preventDefault()),a.addEventListener("keydown",o=>{o.preventDefault(),74==o.keyCode&&o.target.nextSibling.focus(),75==o.keyCode&&o.target.previousSibling.focus(),o.ctrlKey&&219==o.keyCode&&n.remove(),27==o.keyCode&&n.remove(),13==o.keyCode&&t(e)});const s=o("ul");e.examples.forEach(e=>s.appendChild(o("li",e))),a.appendChild(s),d.appendChild(a)}),[a,d].forEach(e=>n.appendChild(e)),setTimeout(()=>d.querySelector("li").focus(),0),n};const f={backgroundColor:"#000",color:"#fff"},m=(e,t)=>{(async(e,t)=>{const{[e]:n}=await browser.storage.sync.get(e),o=Date.now(),r=t?n.stage+1:0,a={[e]:{...n,time:o,stage:r}};browser.storage.sync.set(a)})(e,t),browser.runtime.sendMessage({action:"Remove cards from all tabs"})};var h=({word:e,meaning:t,examples:n})=>{const a=o("div.washoe-card");r(a,f);const d=o("div",e),i=o(),s=o("span",t),c=o(),l=o("button","Again");l.addEventListener("click",()=>m(e));const u=o("button","Next");return u.addEventListener("click",()=>m(e,1)),[l,u].forEach(e=>c.appendChild(e)),[s,c].forEach(e=>i.appendChild(e)),[d,i].forEach(e=>a.appendChild(e)),a};const y={backgroundColor:"#333",color:"white",position:"fixed",margin:"auto",top:"100px",right:0,left:0,width:"max-content",padding:"16px",margin:"auto"};var x=(e="Loading...")=>{const t=o("span.washoe-spinner",e);return r(t,y),t};const g={backgroundColor:"#333",display:"flex",flexDirection:"column",width:"max-content",padding:"16px",border:"2px solid aqua"},b={display:"flex",margin:"4px"},v=e=>{const t=o();r(t,b);const n=o("textarea",e),a=o("button","-");return a.type="button",a.addEventListener("click",()=>t.remove()),t.appendChild(n),t.appendChild(a),t};var w=({word:e="",meaning:t="",examples:n=[""]},a)=>{const d=o("form.washoe-form");r(d,g),d.addEventListener("submit",a),d.addEventListener("keydown",e=>{(e.ctrlKey&&219==e.keyCode||27==e.keyCode)&&(e.preventDefault(),d.remove())});const i=o("input");i.value=e.trim();const s=o("textarea",t),c=o("div");n.map(v).forEach(e=>c.appendChild(e));const l=o("button","+");l.addEventListener("click",()=>{const e=v("");setTimeout(()=>e.querySelector("textarea").focus(),0),c.appendChild(e)});const u=o("input");return u.type="submit",[i,s,c,l,u].forEach(e=>d.appendChild(e)),setTimeout(()=>i.focus(),0),d};const C=e=>e.querySelector(".def_text")?e.querySelector(".def_text").innerText:e.querySelector(".un_text")?e.querySelector(".un_text").innerText:e.querySelector(".both_text").innerText,k=e=>Array.from(e.querySelectorAll(".vi_content"),e=>e.innerText);var S=e=>Array.from(e.querySelectorAll(".sense"),t=>({word:e.querySelector("#ld_entries_v2_mainh").innerText,meaning:C(t),examples:k(t)}));document.addEventListener("keydown",e=>{e.ctrlKey&&191==e.keyCode&&(e.preventDefault(),a(".washoe-paper"),a(".washoe-search-bar"),document.body.appendChild(i(L)))}),browser.runtime.onMessage.addListener(e=>{(e=>Boolean(document.querySelector(e)))(".washoe-card")||document.body.appendChild(h(e.wordData))});const E=e=>{e.preventDefault();const[t,n,...o]=Array.from(e.originalTarget.elements).map(e=>e.value).filter(e=>e);(({word:e,meaning:t,examples:n})=>{browser.storage.sync.set({[e]:{meaning:t,examples:n,stage:0,time:Date.now()}})})({word:t,meaning:n,examples:o}),a(".washoe-form")},L=e=>{document.body.appendChild(x(`Waiting for "${e}"`)),(async e=>{const t=await fetch(e),n=await t.text();return await(new DOMParser).parseFromString(n,"text/html")})("http://www.learnersdictionary.com/definition/"+e).then(e=>S(e)).then(e=>{a(".washoe-spinner"),document.body.appendChild(p(e,e=>{a(".washoe-paper"),document.body.appendChild(w(e,E))}))}).catch(console.error)}}]);